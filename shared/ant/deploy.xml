<?xml version="1.0" encoding="UTF-8"?>
<project name="deploy">
	
    <target name="-deploy-init">
		<dirname property="deploy.basedir" file="${ant.file.deploy}"/>
		<property file="${deploy.basedir}/deploy.properties"/>
        <property file="nbproject/deploy.properties"/>
    </target>
    
    <target depends="bnd-generate" name="deploy-boundle-auto">
	<copy file="${dist.jar}" todir="${deploy.auto.dir}" overwrite="true" />
    </target>
    
    <target depends="bnd-generate" name="deploy-boundle-manual">
	<copy file="${dist.jar}" todir="${deploy.manual.dir}" overwrite="true" />
    </target>
       
    <target depends="-deploy-init, compile" name="bnd-generate">
       <delete dir="${dist.dir}"/>
       <mkdir dir="${dist.dir}"/>
       <taskdef resource="aQute/bnd/ant/taskdef.properties" classpath="${deploy.bnd.jar}"/>
       <bnd 
         classpath="${build.classes.dir}"
         eclipse="false" 
         failok="false" 
         exceptions="true" 
         files="${deploy.bnd.file}"
         output="${dist.dir}"/>
    </target>

</project>
